import type { FC, ReactNode } from 'react';
import { createContext, useContext, useEffect, useMemo, useState } from 'react';

export type Lang = 'en' | 'nb';

type Dict = Record<string, string>;

const en: Dict = {
  'nav.dashboard': 'Dashboard',
  'nav.applications': 'Applications',
  'nav.tasks': 'Tasks',
  'nav.documents': 'Documents',
  'nav.insights': 'Insights',
  'nav.calendar': 'Calendar',

  // Dashboard
  'dashboard.welcome': 'Welcome back',
  'dashboard.greeting': 'Good to see you again',
  'dashboard.kpi.applications': 'Applications',
  'dashboard.kpi.interviews': 'Interviews',
  'dashboard.kpi.documents': 'Documents',
  'dashboard.kpi.success': 'Success Rate',
  'dashboard.charts.applications': 'Applications Over Time',
  'dashboard.charts.tasks': 'Tasks Completed vs Pending',
  'dashboard.reminders.upcoming': 'Upcoming Reminders',
  'dashboard.reminders.followup': 'Follow-ups Needed',
  'dashboard.reminders.recent': 'Recent Activity',
  'dashboard.notification.offer': 'You have an offer today!',
  'dashboard.notification.interview': 'Interview scheduled for',
  'dashboard.reminder.add': 'Add Reminder',
  'dashboard.reminder.title': 'Reminder Title',
  'dashboard.reminder.when': 'When',
  'dashboard.reminder.save': 'Save Reminder',
  'dashboard.reminder.cancel': 'Cancel',
  'dashboard.welcome.title': 'Welcome, {name} üëã',
  'dashboard.welcome.interviewUpcoming': 'You have an upcoming interview.',
  'dashboard.welcome.planWeek': 'Plan your week ahead.',
  'dashboard.welcome.weekendReminders': '3 reminders before the weekend.',
  'dashboard.welcome.overview': 'Here\'s your job search overview.',
  'dashboard.notification.offerReceived': 'You received a job offer!',
  'dashboard.notification.interviewsUpcoming': 'You have upcoming interviews',
  'dashboard.nextInterview': 'Next interview: {date}',
  'dashboard.viewDetails': 'View details ‚Üí',

  // Applications
  'applications.title': 'Job Applications',
  'applications.add': 'Add Application',
  'applications.edit': 'Edit Application',
  'applications.delete': 'Delete',
  'applications.status.applied': 'Applied',
  'applications.status.interview': 'Interview',
  'applications.status.offer': 'Offer',
  'applications.status.rejected': 'Rejected',
  'applications.status.appliedValue': 'Applied',
  'applications.status.interviewValue': 'Interview',
  'applications.status.offerValue': 'Offer',
  'applications.status.rejectedValue': 'Rejected',
  'applications.company': 'Company name',
  'applications.position': 'Job title',
  'applications.appliedDate': 'Applied Date',
  'applications.interviewDate': 'Interview Date',
  'applications.offerDate': 'Offer Date',
  'applications.rejectedDate': 'Rejected Date',
  'applications.notes': 'Notes',
  'applications.url': 'Job URL',
  'applications.save': 'Save',
  'applications.cancel': 'Cancel',
  'applications.confirmDelete': 'Are you sure you want to delete this application?',
  'applications.bulkActions': 'Bulk Actions',
  'applications.changeStatus': 'Change Status',
  'applications.deleteSelected': 'Delete Selected',
  'applications.filter': 'Filter',
  'applications.sort': 'Sort',
  'applications.search': 'Search applications...',
  'applications.filters': 'Filters',
  'applications.show': 'Show',
  'applications.hide': 'Hide',
  'applications.status': 'Status',
  'applications.company': 'Company',
  'applications.dateRange': 'Date Range',
  'applications.sortBy': 'Sort by',
  'applications.appliedDate': 'Applied Date',
  'applications.last7Days': 'Last 7 Days',
  'applications.last30Days': 'Last 30 Days',
  'applications.last90Days': 'Last 90 Days',
  'applications.allTime': 'All Time',
  'applications.allStatuses': 'All Statuses',
  'applications.allCompanies': 'All Companies',
  'applications.markFollowedUp': 'Mark Followed Up',
  'applications.companyRequired': 'Company and Position are required',
  'applications.createFailed': 'Failed to create application',
  'applications.updateFailed': 'Failed to update application',
  'applications.createApplication': 'Create Application',
  'applications.table.company': 'Company',
  'applications.table.position': 'Position',
  'applications.table.dateApplied': 'Date Applied',
  'applications.table.status': 'Status',
  'applications.table.statusDate': 'Status Date',
  'applications.table.nextAction': 'Next Action',
  'applications.table.actions': 'Actions',
  'applications.modal.title': 'Application Details',
  'applications.modal.editTitle': 'Edit Application',
  'applications.modal.createTitle': 'Create Application',

  // Tasks
  'tasks.title': 'Tasks',
  'tasks.add': 'Add Task',
  'tasks.edit': 'Edit Task',
  'tasks.delete': 'Delete',
  'tasks.completed': 'Completed',
  'tasks.pending': 'Pending',
  'tasks.overdue': 'Overdue',
  'tasks.dueToday': 'Due Today',
  'tasks.all': 'All Tasks',
  'tasks.type.note': 'Note',
  'tasks.type.call': 'Call',
  'tasks.type.email': 'Email',
  'tasks.type.meeting': 'Meeting',
  'tasks.type.other': 'Other',
  'tasks.title': 'Task Title',
  'tasks.description': 'Description',
  'tasks.dueDate': 'Due Date',
  'tasks.type': 'Type',
  'tasks.linkedApp': 'Linked Application',
  'tasks.save': 'Save',
  'tasks.cancel': 'Cancel',
  'tasks.markComplete': 'Mark Complete',
  'tasks.markIncomplete': 'Mark Incomplete',
  'tasks.toDo': 'To Do',
  'tasks.inProgress': 'In Progress',
  'tasks.done': 'Done',
  'tasks.noMoreTasks': 'No more tasks found',
  'tasks.addNewTask': 'Add a new task to stay organized.',
  'tasks.createTask': 'Create Task',
  'tasks.editTask': 'Edit Task',
  'tasks.deleteTask': 'Delete task',
  'tasks.deleteConfirm': 'Are you sure you want to delete this task? This action cannot be undone.',
  'tasks.saveChanges': 'Save Changes',
  'tasks.titleRequired': 'Title is required',
  'tasks.linkRequired': 'Please link this task to an application',
  'tasks.createFailed': 'Failed to create task',
  'tasks.updateFailed': 'Failed to update task',

  // Documents
  'documents.title': 'Documents',
  'documents.upload': 'Upload Document',
  'documents.delete': 'Delete',
  'documents.download': 'Download',
  'documents.link': 'Link to Application',
  'documents.unlink': 'Unlink',
  'documents.name': 'Document Name',
  'documents.type': 'File Type',
  'documents.size': 'File Size',
  'documents.uploaded': 'Uploaded',
  'documents.linkedTo': 'Linked to',
  'documents.noDocuments': 'No documents uploaded yet',
  'documents.uploadNew': 'Upload your first document',

  // Insights
  'insights.title': 'Insights',
  'insights.kpi.total': 'Total Applications',
  'insights.kpi.interviews': 'Interviews',
  'insights.kpi.offers': 'Offers',
  'insights.kpi.successRate': 'Success Rate',
  'insights.charts.funnel': 'Application Conversion Funnel',
  'insights.charts.companies': 'Top Companies Applied To',
  'insights.charts.outcomes': 'Job Application Outcomes',
  'insights.charts.responseTime': 'Time to First Response',
  'insights.charts.responseTimeByCompany': 'Time to First Response (by Company)',
  'insights.charts.successRateOverTime': 'Success Rate Over Time',
  'insights.charts.avgResponseTime': 'Average Response Time',
  'insights.charts.interviewsOverTime': 'Interviews Over Time',
  'insights.charts.keyMetrics': 'Key Metrics',
  'insights.weekly.title': 'Weekly Progress',
  'insights.weekly.applications': 'Applications',
  'insights.weekly.interviews': 'Interviews',
  'insights.weekly.offers': 'Offers',
  'insights.weekly.rejections': 'Rejections',
  'insights.filters.timeRange': 'Time Range',
  'insights.filters.position': 'Position',
  'insights.filters.all': 'All',
  'insights.filters.last7': 'Last 7 days',
  'insights.filters.last30': 'Last 30 days',
  'insights.filters.last180': 'Last 6 months',
  'insights.filters.allTime': 'All time',

  // Profile
  'profile.title': 'Profile Settings',
  'profile.personal': 'Personal Information',
  'profile.firstName': 'First Name',
  'profile.lastName': 'Last Name',
  'profile.email': 'Email',
  'profile.company': 'Company',
  'profile.avatar': 'Profile Picture',
  'profile.changePassword': 'Change Password',
  'profile.currentPassword': 'Current Password',
  'profile.newPassword': 'New Password',
  'profile.confirmPassword': 'Confirm Password',
  'profile.language': 'Language',
  'profile.notifications': 'Notifications',
  'profile.theme': 'Theme',
  'profile.light': 'Light',
  'profile.dark': 'Dark',
  'profile.system': 'System',
  'profile.save': 'Save Profile',
  'profile.saving': 'Saving...',
  'profile.saved': 'Saved',
  'profile.error': 'Error',

  // Common
  'common.loading': 'Loading...',
  'common.error': 'Error',
  'common.retry': 'Retry',
  'common.close': 'Close',
  'common.cancel': 'Cancel',
  'common.save': 'Save',
  'common.delete': 'Delete',
  'common.edit': 'Edit',
  'common.add': 'Add',
  'common.search': 'Search',
  'common.filter': 'Filter',
  'common.sort': 'Sort',
  'common.actions': 'Actions',
  'common.yes': 'Yes',
  'common.no': 'No',
  'common.ok': 'OK',

  // Search
  'search.placeholder': 'Search‚Ä¶ (Ctrl + /)',
  'search.suggestions.title': 'SEARCH IN',
  'search.suggestions.applications': 'Applications',
  'search.suggestions.tasks': 'Tasks',
  'search.suggestions.documents': 'Documents',

  // Navbar
  'navbar.notifications': 'Notifications',
  'navbar.noNotifications': 'No notifications',
  'navbar.settings': 'Settings',
  'navbar.signOut': 'Sign out',
  'navbar.toggleTheme': 'Toggle theme',

  // Search
  'search.title': 'Search Results for "{query}"',
  'search.tabs.all': 'All',
  'search.tabs.applications': 'Applications',
  'search.tabs.tasks': 'Tasks',
  'search.tabs.documents': 'Documents',
  'search.noResults.title': 'No results found',
  'search.noResults.text': 'Try adjusting your search terms or browse through different categories.',

  // Calendar
  'calendar.title': 'Calendar',
  'calendar.legend.interviews': 'Interviews',
  'calendar.legend.deadlines': 'Deadlines',
  'calendar.legend.todo': 'To do',
  'calendar.legend.overdue': 'Overdue',

  'calendar.prev.month': 'Prev month',
  'calendar.prev.week': 'Prev week',
  'calendar.prev.day': 'Prev day',
  'calendar.next.month': 'Next month',
  'calendar.next.week': 'Next week',
  'calendar.next.day': 'Next day',
  'calendar.today': 'Today',
  'calendar.view.month': 'Month',
  'calendar.view.week': 'Week',
  'calendar.view.day': 'Day',
  'calendar.addReminder': '+ Add Reminder',

  'calendar.details.type': 'Type',
  'calendar.details.title': 'Title',
  'calendar.details.when': 'When',
  'calendar.details.next': 'Next Action',
  'calendar.details.app': 'Linked application',
  'calendar.details.notes': 'Notes',
  'calendar.details.close': 'Close',
  'calendar.details.edit': 'Edit',

  'calendar.modal.addTitle': 'Add Reminder',
  'calendar.modal.type': 'Type',
  'calendar.modal.type.interview': 'Interview',
  'calendar.modal.type.deadline': 'Deadline',
  'calendar.modal.type.todo': 'To do',
  'calendar.modal.type.other': 'Other',
  'calendar.modal.linkApp': 'Link Application (optional)',
  'calendar.modal.updateTask': 'Update Existing Task (optional)',
  'calendar.modal.when': 'Date & time',
  'calendar.modal.notes': 'Notes (optional)',
  'calendar.modal.cancel': 'Cancel',
  'calendar.modal.save': 'Save',

  // Profile
  'profile.title': 'Settings',
  'profile.sections.profile': 'Profile Settings',
  'profile.sections.notifications': 'Notifications',
  'profile.sections.preferences': 'Application Preferences',
  'profile.sections.integrations': 'Integrations',
  'profile.sections.theme': 'Theme & Appearance',
  'profile.sections.privacy': 'Privacy & Security',
  'profile.sections.subscription': 'Subscription / Account Plan',
  'profile.sections.support': 'Support',
  'profile.sections.danger': 'Danger Zone',
  'profile.picture': 'Profile Picture',
  'profile.chooseImage': 'Choose Image‚Ä¶',
  'profile.removeImage': 'Remove Image',
  'profile.avatarInstructions': 'Click the avatar to change or remove',
  'profile.uploading': 'Uploading‚Ä¶',
  'profile.firstName': 'First Name',
  'profile.lastName': 'Last Name',
  'profile.oldPassword': 'Old Password',
  'profile.enterOldPassword': 'Enter old password',
  'profile.newPassword': 'New Password',
  'profile.enterNewPassword': 'Enter new password',
  'profile.confirmPassword': 'Confirm Password',
  'profile.confirmNewPassword': 'Confirm new password',
  'profile.language': 'Language',
  'profile.saving': 'Saving‚Ä¶',
  'profile.saveProfile': 'Save Profile',
  'profile.saved': 'Saved',
  'profile.selectImageFile': 'Please select an image file',
  'profile.uploadFailed': 'Upload failed',
  'profile.removeAvatarFailed': 'Failed to remove avatar',
  'profile.saveFailed': 'Could not save',
  'profile.emailNotifications': 'Email Notifications',
  'profile.pushNotifications': 'Push/Browser Notifications',
  'profile.weeklySummary': 'Weekly Job Summary Emails',
  'profile.deliveryPreference': 'Delivery Preference',
  'profile.onlyImportant': 'Only important',
  'profile.allUpdates': 'All updates',
  'profile.saveNotifications': 'Save Notification Settings',
  'profile.defaultView': 'Default view',
  'profile.reminderTime': 'Default reminder time',
  'profile.timezone': 'Timezone',
  'profile.workingHours': 'Working hours',
  'profile.savePreferences': 'Save Preferences',
  'profile.connectLinkedIn': 'Connect LinkedIn',
  'profile.connectGoogleDrive': 'Connect Google Drive',
  'profile.connectDropbox': 'Connect Dropbox',
  'profile.exportCSV': 'Export CSV',
  'profile.exportPDF': 'Export PDF',
  'profile.mode': 'Mode',
  'profile.light': 'Light',
  'profile.dark': 'Dark',
  'profile.accentColor': 'Accent color',
  'profile.blue': 'Blue',
  'profile.purple': 'Purple',
  'profile.green': 'Green',
  'profile.fontSize': 'Font size',
  'profile.enable2FA': 'Enable Two‚ÄëFactor Authentication (2FA)',
  'profile.activeSessions': 'Active sessions',
  'profile.session1': 'Mac ‚Ä¢ Chrome ‚Ä¢ Oslo ¬∑ Active now',
  'profile.session2': 'iPhone ‚Ä¢ Safari ‚Ä¢ Last active 2d ago',
  'profile.signOutSessions': 'Sign out of all other sessions',
  'profile.currentPlan': 'Current plan: Free ‚Ä¢ 12 applications tracked ‚Ä¢ 4 documents uploaded',
  'profile.upgrade': 'Upgrade',
  'profile.manageBilling': 'Manage Billing',
  'profile.helpCenter': 'Help Center',
  'profile.contactSupport': 'Contact Support',
  'profile.feedback': 'Feedback',
  'profile.feedbackPlaceholder': 'What can we improve?',
  'profile.sendFeedback': 'Send Feedback',
  'profile.deleteWarning': 'Permanently delete your account and all associated data. This action cannot be undone.',
  'profile.deleteAccount': 'Delete Account',
};

const nb: Dict = {
  'nav.dashboard': 'Oversikt',
  'nav.applications': 'S√∏knader',
  'nav.tasks': 'Oppgaver',
  'nav.documents': 'Dokumenter',
  'nav.insights': 'Innsikt',
  'nav.calendar': 'Kalender',

  // Dashboard
  'dashboard.welcome': 'Velkommen tilbake',
  'dashboard.greeting': 'Godt √• se deg igjen',
  'dashboard.kpi.applications': 'S√∏knader',
  'dashboard.kpi.interviews': 'Intervjuer',
  'dashboard.kpi.documents': 'Dokumenter',
  'dashboard.kpi.success': 'Suksessrate',
  'dashboard.charts.applications': 'S√∏knader over tid',
  'dashboard.charts.tasks': 'Oppgaver fullf√∏rt vs ventende',
  'dashboard.reminders.upcoming': 'Kommende p√•minnelser',
  'dashboard.reminders.followup': 'Oppf√∏lging trengs',
  'dashboard.reminders.recent': 'Nylig aktivitet',
  'dashboard.notification.offer': 'Du har et tilbud i dag!',
  'dashboard.notification.interview': 'Intervju planlagt for',
  'dashboard.reminder.add': 'Legg til p√•minnelse',
  'dashboard.reminder.title': 'P√•minnelsestittel',
  'dashboard.reminder.when': 'N√•r',
  'dashboard.reminder.save': 'Lagre p√•minnelse',
  'dashboard.reminder.cancel': 'Avbryt',
  'dashboard.welcome.title': 'Velkommen, {name} üëã',
  'dashboard.welcome.interviewUpcoming': 'Du har et kommende intervju.',
  'dashboard.welcome.planWeek': 'Planlegg uken din.',
  'dashboard.welcome.weekendReminders': '3 p√•minnelser f√∏r helgen.',
  'dashboard.welcome.overview': 'Her er oversikten over jobbs√∏ket ditt.',
  'dashboard.notification.offerReceived': 'Du har mottatt et jobbtilbud!',
  'dashboard.notification.interviewsUpcoming': 'Du har kommende intervjuer',
  'dashboard.nextInterview': 'Neste intervju: {date}',
  'dashboard.viewDetails': 'Se detaljer ‚Üí',

  // Applications
  'applications.title': 'Jobbs√∏knader',
  'applications.add': 'Legg til s√∏knad',
  'applications.edit': 'Rediger s√∏knad',
  'applications.delete': 'Slett',
  'applications.status.applied': 'S√∏kt',
  'applications.status.interview': 'Intervju',
  'applications.status.offer': 'Tilbud',
  'applications.status.rejected': 'Avsl√•tt',
  'applications.status.appliedValue': 'Applied',
  'applications.status.interviewValue': 'Interview',
  'applications.status.offerValue': 'Offer',
  'applications.status.rejectedValue': 'Rejected',
  'applications.company': 'Bedriftsnavn',
  'applications.position': 'Jobbtittel',
  'applications.appliedDate': 'S√∏kt dato',
  'applications.interviewDate': 'Intervjudato',
  'applications.offerDate': 'Tilbudsdato',
  'applications.rejectedDate': 'Avsl√•tt dato',
  'applications.notes': 'Notater',
  'applications.url': 'Jobb-URL',
  'applications.save': 'Lagre',
  'applications.cancel': 'Avbryt',
  'applications.confirmDelete': 'Er du sikker p√• at du vil slette denne s√∏knaden?',
  'applications.bulkActions': 'Massehandlinger',
  'applications.changeStatus': 'Endre status',
  'applications.deleteSelected': 'Slett valgte',
  'applications.filter': 'Filtrer',
  'applications.sort': 'Sorter',
  'applications.search': 'S√∏k i s√∏knader...',
  'applications.filters': 'Filtre',
  'applications.show': 'Vis',
  'applications.hide': 'Skjul',
  'applications.status': 'Status',
  'applications.company': 'Bedrift',
  'applications.dateRange': 'Tidsperiode',
  'applications.sortBy': 'Sorter etter',
  'applications.appliedDate': 'S√∏kt dato',
  'applications.last7Days': 'Siste 7 dager',
  'applications.last30Days': 'Siste 30 dager',
  'applications.last90Days': 'Siste 90 dager',
  'applications.allTime': 'Hele tiden',
  'applications.allStatuses': 'Alle statuser',
  'applications.allCompanies': 'Alle bedrifter',
  'applications.markFollowedUp': 'Merk som fulgt opp',
  'applications.companyRequired': 'Bedrift og stilling er p√•krevd',
  'applications.createFailed': 'Kunne ikke opprette s√∏knad',
  'applications.updateFailed': 'Kunne ikke oppdatere s√∏knad',
  'applications.createApplication': 'Opprett s√∏knad',
  'applications.table.company': 'Bedrift',
  'applications.table.position': 'Stilling',
  'applications.table.dateApplied': 'S√∏kt dato',
  'applications.table.status': 'Status',
  'applications.table.statusDate': 'Statusdato',
  'applications.table.nextAction': 'Neste handling',
  'applications.table.actions': 'Handlinger',
  'applications.modal.title': 'S√∏knadsdetaljer',
  'applications.modal.editTitle': 'Rediger s√∏knad',
  'applications.modal.createTitle': 'Opprett s√∏knad',

  // Tasks
  'tasks.title': 'Oppgaver',
  'tasks.add': 'Legg til oppgave',
  'tasks.edit': 'Rediger oppgave',
  'tasks.delete': 'Slett',
  'tasks.completed': 'Fullf√∏rt',
  'tasks.pending': 'Ventende',
  'tasks.overdue': 'Forfalt',
  'tasks.dueToday': 'Forfaller i dag',
  'tasks.all': 'Alle oppgaver',
  'tasks.type.note': 'Notat',
  'tasks.type.call': 'Telefon',
  'tasks.type.email': 'E-post',
  'tasks.type.meeting': 'M√∏te',
  'tasks.type.other': 'Annet',
  'tasks.title': 'Oppgavetittel',
  'tasks.description': 'Beskrivelse',
  'tasks.dueDate': 'Forfallsdato',
  'tasks.type': 'Type',
  'tasks.linkedApp': 'Knyttet s√∏knad',
  'tasks.save': 'Lagre',
  'tasks.cancel': 'Avbryt',
  'tasks.markComplete': 'Merk som fullf√∏rt',
  'tasks.markIncomplete': 'Merk som ufullf√∏rt',
  'tasks.toDo': '√Ö gj√∏re',
  'tasks.inProgress': 'P√•g√•r',
  'tasks.done': 'Ferdig',
  'tasks.noMoreTasks': 'Ingen flere oppgaver funnet',
  'tasks.addNewTask': 'Legg til en ny oppgave for √• holde deg organisert.',
  'tasks.createTask': 'Opprett oppgave',
  'tasks.editTask': 'Rediger oppgave',
  'tasks.deleteTask': 'Slett oppgave',
  'tasks.deleteConfirm': 'Er du sikker p√• at du vil slette denne oppgaven? Denne handlingen kan ikke angres.',
  'tasks.saveChanges': 'Lagre endringer',
  'tasks.titleRequired': 'Tittel er p√•krevd',
  'tasks.linkRequired': 'Vennligst knytt denne oppgaven til en s√∏knad',
  'tasks.createFailed': 'Kunne ikke opprette oppgave',
  'tasks.updateFailed': 'Kunne ikke oppdatere oppgave',

  // Documents
  'documents.title': 'Dokumenter',
  'documents.upload': 'Last opp dokument',
  'documents.delete': 'Slett',
  'documents.download': 'Last ned',
  'documents.link': 'Knytt til s√∏knad',
  'documents.unlink': 'Fjern kobling',
  'documents.name': 'Dokumentnavn',
  'documents.type': 'Filtype',
  'documents.size': 'Filst√∏rrelse',
  'documents.uploaded': 'Lastet opp',
  'documents.linkedTo': 'Knyttet til',
  'documents.noDocuments': 'Ingen dokumenter lastet opp enn√•',
  'documents.uploadNew': 'Last opp ditt f√∏rste dokument',

  // Insights
  'insights.title': 'Innsikt',
  'insights.kpi.total': 'Totalt antall s√∏knader',
  'insights.kpi.interviews': 'Intervjuer',
  'insights.kpi.offers': 'Tilbud',
  'insights.kpi.successRate': 'Suksessrate',
  'insights.charts.funnel': 'S√∏knadskonverterings-trengsel',
  'insights.charts.companies': 'Toppbedrifter s√∏kt til',
  'insights.charts.outcomes': 'Jobbs√∏knadsresultater',
  'insights.charts.responseTime': 'Tid til f√∏rste svar',
  'insights.charts.responseTimeByCompany': 'Tid til f√∏rste svar (etter bedrift)',
  'insights.charts.successRateOverTime': 'Suksessrate over tid',
  'insights.charts.avgResponseTime': 'Gjennomsnittlig svartid',
  'insights.charts.interviewsOverTime': 'Intervjuer over tid',
  'insights.charts.keyMetrics': 'N√∏kkeltall',
  'insights.weekly.title': 'Ukentlig fremgang',
  'insights.weekly.applications': 'S√∏knader',
  'insights.weekly.interviews': 'Intervjuer',
  'insights.weekly.offers': 'Tilbud',
  'insights.weekly.rejections': 'Avslag',
  'insights.filters.timeRange': 'Tidsperiode',
  'insights.filters.position': 'Stilling',
  'insights.filters.all': 'Alle',
  'insights.filters.last7': 'Siste 7 dager',
  'insights.filters.last30': 'Siste 30 dager',
  'insights.filters.last180': 'Siste 6 m√•neder',
  'insights.filters.allTime': 'Hele tiden',

  // Profile
  'profile.title': 'Innstillinger',
  'profile.sections.profile': 'Profilinnstillinger',
  'profile.sections.notifications': 'Varsler',
  'profile.sections.preferences': 'Applikasjonspreferanser',
  'profile.sections.integrations': 'Integrasjoner',
  'profile.sections.theme': 'Tema og utseende',
  'profile.sections.privacy': 'Personvern og sikkerhet',
  'profile.sections.subscription': 'Abonnement / Kontoplan',
  'profile.sections.support': 'Support',
  'profile.sections.danger': 'Fare-sone',
  'profile.picture': 'Profilbilde',
  'profile.chooseImage': 'Velg bilde...',
  'profile.removeImage': 'Fjern bilde',
  'profile.avatarInstructions': 'Klikk p√• avataren for √• endre eller fjerne',
  'profile.uploading': 'Laster opp...',
  'profile.firstName': 'Fornavn',
  'profile.lastName': 'Etternavn',
  'profile.oldPassword': 'Gammelt passord',
  'profile.enterOldPassword': 'Skriv inn gammelt passord',
  'profile.newPassword': 'Nytt passord',
  'profile.enterNewPassword': 'Skriv inn nytt passord',
  'profile.confirmPassword': 'Bekreft passord',
  'profile.confirmNewPassword': 'Bekreft nytt passord',
  'profile.language': 'Spr√•k',
  'profile.saving': 'Lagrer...',
  'profile.saveProfile': 'Lagre profil',
  'profile.saved': 'Lagret',
  'profile.selectImageFile': 'Vennligst velg en bildefil',
  'profile.uploadFailed': 'Opplasting mislyktes',
  'profile.removeAvatarFailed': 'Kunne ikke fjerne avatar',
  'profile.saveFailed': 'Kunne ikke lagre',
  'profile.emailNotifications': 'E-postvarsler',
  'profile.pushNotifications': 'Push/Nettleservarsler',
  'profile.weeklySummary': 'Ukentlige jobbsammendrag-e-poster',
  'profile.deliveryPreference': 'Leveringspreferanse',
  'profile.onlyImportant': 'Kun viktige',
  'profile.allUpdates': 'Alle oppdateringer',
  'profile.saveNotifications': 'Lagre varslingsinnstillinger',
  'profile.defaultView': 'Standardvisning',
  'profile.reminderTime': 'Standard p√•minnelsestid',
  'profile.timezone': 'Tidssone',
  'profile.workingHours': 'Arbeidstider',
  'profile.savePreferences': 'Lagre preferanser',
  'profile.connectLinkedIn': 'Koble til LinkedIn',
  'profile.connectGoogleDrive': 'Koble til Google Drive',
  'profile.connectDropbox': 'Koble til Dropbox',
  'profile.exportCSV': 'Eksporter CSV',
  'profile.exportPDF': 'Eksporter PDF',
  'profile.mode': 'Modus',
  'profile.light': 'Lyst',
  'profile.dark': 'M√∏rkt',
  'profile.accentColor': 'Aksentfarge',
  'profile.blue': 'Bl√•',
  'profile.purple': 'Lilla',
  'profile.green': 'Gr√∏nn',
  'profile.fontSize': 'Skriftst√∏rrelse',
  'profile.enable2FA': 'Aktiver tofaktorautentisering (2FA)',
  'profile.activeSessions': 'Aktive √∏kter',
  'profile.session1': 'Mac ‚Ä¢ Chrome ‚Ä¢ Oslo ¬∑ Aktiv n√•',
  'profile.session2': 'iPhone ‚Ä¢ Safari ‚Ä¢ Sist aktiv for 2d siden',
  'profile.signOutSessions': 'Logg ut av alle andre √∏kter',
  'profile.currentPlan': 'N√•v√¶rende plan: Gratis ‚Ä¢ 12 s√∏knader sporet ‚Ä¢ 4 dokumenter lastet opp',
  'profile.upgrade': 'Oppgrader',
  'profile.manageBilling': 'Administrer fakturering',
  'profile.helpCenter': 'Hjelpesenter',
  'profile.contactSupport': 'Kontakt support',
  'profile.feedback': 'Tilbakemelding',
  'profile.feedbackPlaceholder': 'Hva kan vi forbedre?',
  'profile.sendFeedback': 'Send tilbakemelding',
  'profile.deleteWarning': 'Slett kontoen din og all tilknyttet data permanent. Denne handlingen kan ikke angres.',
  'profile.deleteAccount': 'Slett konto',

  // Common
  'common.loading': 'Laster...',
  'common.error': 'Feil',
  'common.retry': 'Pr√∏v igjen',
  'common.close': 'Lukk',
  'common.cancel': 'Avbryt',
  'common.save': 'Lagre',
  'common.delete': 'Slett',
  'common.edit': 'Rediger',
  'common.add': 'Legg til',
  'common.search': 'S√∏k',
  'common.filter': 'Filtrer',
  'common.sort': 'Sorter',
  'common.actions': 'Handlinger',
  'common.yes': 'Ja',
  'common.no': 'Nei',
  'common.ok': 'OK',

  // Search
  'search.placeholder': 'S√∏k‚Ä¶ (Ctrl + /)',
  'search.suggestions.title': 'S√òK I',
  'search.suggestions.applications': 'S√∏knader',
  'search.suggestions.tasks': 'Oppgaver',
  'search.suggestions.documents': 'Dokumenter',

  // Navbar
  'navbar.notifications': 'Varsler',
  'navbar.noNotifications': 'Ingen varsler',
  'navbar.settings': 'Innstillinger',
  'navbar.signOut': 'Logg ut',
  'navbar.toggleTheme': 'Bytt tema',
  'search.title': 'S√∏keresultater for "{query}"',
  'search.tabs.all': 'Alle',
  'search.tabs.applications': 'S√∏knader',
  'search.tabs.tasks': 'Oppgaver',
  'search.tabs.documents': 'Dokumenter',
  'search.noResults.title': 'Ingen resultater funnet',
  'search.noResults.text': 'Pr√∏v √• justere s√∏keordene dine eller bla gjennom forskjellige kategorier.',

  // Calendar
  'calendar.title': 'Kalender',
  'calendar.legend.interviews': 'Intervjuer',
  'calendar.legend.deadlines': 'Frister',
  'calendar.legend.todo': '√Ö gj√∏re',
  'calendar.legend.overdue': 'Forfalt',

  'calendar.prev.month': 'Forrige m√•ned',
  'calendar.prev.week': 'Forrige uke',
  'calendar.prev.day': 'Forrige dag',
  'calendar.next.month': 'Neste m√•ned',
  'calendar.next.week': 'Neste uke',
  'calendar.next.day': 'Neste dag',
  'calendar.today': 'I dag',
  'calendar.view.month': 'M√•ned',
  'calendar.view.week': 'Uke',
  'calendar.view.day': 'Dag',
  'calendar.addReminder': '+ Legg til p√•minnelse',

  'calendar.details.type': 'Type',
  'calendar.details.title': 'Tittel',
  'calendar.details.when': 'N√•r',
  'calendar.details.next': 'Neste handling',
  'calendar.details.app': 'Knyttet s√∏knad',
  'calendar.details.notes': 'Notater',
  'calendar.details.close': 'Lukk',
  'calendar.details.edit': 'Rediger',

  'calendar.modal.addTitle': 'Legg til p√•minnelse',
  'calendar.modal.type': 'Type',
  'calendar.modal.type.interview': 'Intervju',
  'calendar.modal.type.deadline': 'Frist',
  'calendar.modal.type.todo': '√Ö gj√∏re',
  'calendar.modal.type.other': 'Annet',
  'calendar.modal.linkApp': 'Knytt s√∏knad (valgfritt)',
  'calendar.modal.updateTask': 'Oppdater eksisterende oppgave (valgfritt)',
  'calendar.modal.when': 'Dato og klokkeslett',
  'calendar.modal.notes': 'Notater (valgfritt)',
  'calendar.modal.cancel': 'Avbryt',
  'calendar.modal.save': 'Lagre',
};

const DICTS: Record<Lang, Dict> = { en, nb };

export interface I18nContextValue {
  lang: Lang;
  setLang: (lang: Lang) => void;
  t: (key: string) => string;
}

const I18nContext = createContext<I18nContextValue | undefined>(undefined);

const STORAGE_KEY = 'hp-lang';

export const I18nProvider: FC<{ children: ReactNode }> = ({ children }) => {
  const [lang, setLang] = useState<Lang>('en');

  useEffect(() => {
    try {
      const stored = localStorage.getItem(STORAGE_KEY) as Lang | null;
      if (stored === 'en' || stored === 'nb') setLang(stored);
    } catch { /* ignore */ }
  }, []);

  useEffect(() => {
    try {
      localStorage.setItem(STORAGE_KEY, lang);
      document.documentElement.lang = lang === 'nb' ? 'nb' : 'en';
    } catch { /* ignore */ }
  }, [lang]);

  const t = useMemo(() => {
    const dict = DICTS[lang];
    return (key: string) => dict[key] ?? key;
  }, [lang]);

  const value = useMemo(() => ({ lang, setLang, t }), [lang, t]);

  return (
    <I18nContext.Provider value={value}>{children}</I18nContext.Provider>
  );
};

export const useI18n = (): I18nContextValue => {
  const ctx = useContext(I18nContext);
  if (!ctx) throw new Error('useI18n must be used within I18nProvider');
  return ctx;
}; 